<!DOCTYPE html>
<html>
<head>
    <title>Audio Decode Example</title>
</head>
<body>
    <button id="playButton">Play Audio</button>

    <script>
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        async function loadAudioFile(url) {
            const response = await fetch(url);
            const arrayBuffer = await response.arrayBuffer();
            return arrayBuffer;
        }

        async function decodeAudioData(arrayBuffer) {
            const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
            return audioBuffer;
        }

        function playAudio(audioBuffer) {
            const source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioContext.destination);
            source.start(0);
        }

        const files = "226872391 28193209 32062130 40289835 630965613".split(" ");
        console.log(files);

        document.getElementById('playButton').addEventListener('click', async () => {
            try {
                const fileUrl = `/yinsuda/${files[Math.floor(Math.random()*5)]}/output1.mp3`;
                const arrayBuffer = await loadAudioFile(fileUrl);
                const audioBuffer = await decodeAudioData(arrayBuffer);
                // playAudio(audioBuffer);
            } catch (error) {
                console.error('Error loading or decoding audio data:', error);
            }
        });
    </script>
</body>
</html>

